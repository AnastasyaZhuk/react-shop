{"version":3,"sources":["components/common/Header.jsx","components/common/Footer.jsx","reducer.js","context.js","components/catalog/GoodItem.jsx","components/catalog/GoodsList.jsx","components/Preloader.jsx","components/Cart.jsx","components/basket/BasketItem.jsx","components/basket/BasketList.jsx","components/basket/Alert.jsx","components/Shop.jsx","config.js","App.js","index.js"],"names":["Header","className","href","id","Footer","Date","getFullYear","reducer","state","type","payload","goods","loading","alertName","order","filter","el","itemIndex","findIndex","orderItem","newOrder","newItem","quantity","map","index","name","newQuantity","isBasketShow","ShopContext","createContext","initialState","ContextProvider","children","useReducer","value","dispatch","closeAlert","removeFromBasket","itemId","addToBasket","item","incQuantity","decQuantity","handleBasketShow","setGoods","data","Provider","GoodItem","props","mainId","displayName","description","displayDescription","price","displayAssets","useContext","regularPrice","src","full_background","alt","onClick","style","fontSize","GoodsList","length","Preloader","Cart","Function","prototype","BasketItem","BasketList","totalPrice","reduce","sum","Alert","useEffect","timerId","setTimeout","clearTimeout","Shop","fetch","headers","process","then","response","json","shop","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.895159f0.chunk.js","sourcesContent":["import React from 'react';\n\nconst Header = () => {\n    return (\n        <nav className=\"blue darken-4\">\n            <div className=\"nav-wrapper\">\n                <a href=\"#\" className=\"brand-logo\">React shop</a>\n                <ul id=\"nav-mobile\" className=\"right hide-on-med-and-down\">\n                    <li><a href=\"https://github.com/AnastasyaZhuk/react-shop\">Repo</a></li>\n                </ul>\n            </div>\n        </nav>\n    );\n};\n\nexport default Header;","import React from 'react';\n\nconst Footer = () => {\n    return (\n        <footer className=\"page-footer blue darken-4\">\n\n            <div className=\"footer-copyright\">\n                <div className=\"container\">\n                    © {new Date().getFullYear()} Copyright Text\n                </div>\n            </div>\n        </footer>\n    );\n};\n\nexport default Footer;","export function reducer(state, {type, payload}) {\n    switch (type) {\n        case 'SET_GOODS':\n            return {\n                ...state,\n                goods: payload || [],\n                loading: false\n            }\n        case 'CLOSE_ALERT' :\n            return {\n                ...state,\n                alertName: ''\n            }\n        case 'REMOVE_FROM_BASKET':\n            return {\n                ...state,\n                order: state.order.filter(el => el.id !== payload.id)\n            }\n        case 'ADD_TO_BASKET' : {\n            const itemIndex = state.order.findIndex(\n                orderItem => orderItem.id === payload.id\n            );\n\n            let newOrder = null;\n            if (itemIndex < 0) {\n                const newItem = {\n                    ...payload,\n                    quantity: 1\n                }\n                newOrder = [...state.order, newItem];\n            } else {\n                newOrder = state.order.map((orderItem, index) => {\n                    if (index === itemIndex) {\n                        return {...orderItem, quantity: orderItem.quantity + 1}\n                    } else {\n                        return orderItem;\n                    }\n                });\n            }\n            return {\n                ...state,\n                order: newOrder,\n                alertName: payload.name\n            }\n        }\n        case 'INC_QUANTITY':\n            return {\n                ...state,\n                order: state.order.map(el => {\n                    if (el.id === payload) {\n                        const newQuantity = el.quantity + 1;\n                        return {\n                            ...el,\n                            quantity: newQuantity\n                        }\n                    } else {\n                        return el;\n                    }\n                })\n            }\n        case 'DEC_QUANTITY':\n            return {\n                ...state,\n                order: state.order.map(el => {\n                    if (el.id === payload ) {\n                        const newQuantity = el.quantity - 1;\n                        return {\n                            ...el,\n                            quantity: newQuantity >= 0 ? newQuantity : 0\n                        }\n                    } else {\n                        return el;\n                    }\n                })\n            }\n        case 'TOGGLE_BASKET':\n            return {\n                ...state,\n                isBasketShow: !state.isBasketShow\n            }\n        default:\n            return state;\n    }\n}","import {createContext, useReducer} from \"react\";\nimport {reducer} from './reducer'\n\nexport const ShopContext = createContext();\n\nconst initialState = {\n    goods: [],\n    loading: true,\n    order: [],\n    isBasketShow: false,\n    alertName: ''\n}\n\nexport const ContextProvider = ({children}) => {\n    const [value, dispatch] = useReducer(reducer, initialState);\n\n    value.closeAlert = () => {\n        dispatch({type: 'CLOSE_ALERT'});\n    }\n\n    value.removeFromBasket = (itemId) => {\n        dispatch({type: 'REMOVE_FROM_BASKET', payload: {id: itemId}});\n    }\n\n    value.addToBasket = (item) => {\n        dispatch({type: 'ADD_TO_BASKET', payload: item});\n    }\n\n    value.incQuantity = (itemId) => {\n        dispatch({type: 'INC_QUANTITY', payload: itemId});\n    }\n\n    value.decQuantity = (itemId, quantity) => {\n        if (quantity === 1) {\n            dispatch({type: 'REMOVE_FROM_BASKET', payload: {id: itemId}});\n        } else {\n            dispatch({type: 'DEC_QUANTITY', payload: itemId});\n        }\n    }\n\n    value.handleBasketShow = () => {\n        dispatch({type: 'TOGGLE_BASKET'});\n    }\n\n    value.setGoods = (data) => {\n        dispatch({type: 'SET_GOODS', payload: data});\n    }\n\n    return <ShopContext.Provider value={value}>\n        {children}\n    </ShopContext.Provider>\n}\n","import React, {useContext} from 'react';\nimport {ShopContext} from \"../../context\";\n\nconst GoodItem = (props) => {\n\n    const {\n        mainId: id,\n        displayName: name,\n        displayDescription: description,\n        price,\n        displayAssets\n    } = props;\n\n    const {addToBasket} = useContext(ShopContext);\n    const {regularPrice} = price;\n\n    const handleClick = () => {\n        addToBasket({\n            id,\n            name,\n            price: regularPrice\n        })\n    }\n\n    return (\n        <div className=\"card\">\n            <div className=\"card-image\">\n                <img src={displayAssets[0].full_background} alt={name}/>\n            </div>\n            <div className=\"card-content\">\n                <span className=\"card-title\">{name}</span>\n                <p>{description}</p>\n            </div>\n            <div className=\"card-action\">\n                <button className=\"btn blue darken-4\" onClick={handleClick}>Купить</button>\n                <span className=\"right\" style={{fontSize: '1.8rem'}}>{regularPrice}₽</span>\n            </div>\n        </div>\n    );\n};\n\nexport default GoodItem;","import React, {useContext} from 'react';\nimport GoodItem from \"./GoodItem\";\nimport {ShopContext} from \"../../context\";\n\nconst GoodsList = () => {\n    const {\n        goods = []\n    } = useContext(ShopContext);\n\n    if (goods.length === 0) {\n        return <h3>Nothing here</h3>\n    }\n\n    return (\n        <div className=\"goods\">\n            {goods.map(item => (\n                <GoodItem key={item.mainId} {...item}/>\n            ))}\n        </div>\n    );\n};\n\nexport default GoodsList;","import React from 'react';\n\nconst Preloader = () => {\n    return (\n        <div className=\"progress\">\n            <div className=\"determinate\"/>\n        </div>\n\n    );\n};\n\nexport default Preloader;","import React, {useContext} from 'react';\nimport {ShopContext} from \"../context\";\n\nconst Cart = () => {\n    const {\n        order = 0,\n        handleBasketShow = Function.prototype\n    } = useContext(ShopContext);\n\n    const quantity = order.length;\n\n    return (\n        <div\n            className=\"cart blue darken-4 white-text\"\n            onClick={handleBasketShow}\n        >\n            <i className=\"material-icons\">shopping_cart</i>\n            {quantity ? <span className=\"cart-quantity\">{quantity}</span> : null}\n        </div>\n    );\n};\n\nexport default Cart;","import React, {useContext} from 'react';\nimport {ShopContext} from \"../../context\";\n\nconst BasketItem = (props) => {\n    const {\n        id,\n        name,\n        price,\n        quantity\n    } = props;\n\n    const {\n        removeFromBasket,\n        incQuantity,\n        decQuantity\n    } = useContext(ShopContext);\n\n    return (\n        <li className=\"collection-item\">\n            {name}\n            <i className=\"material-icons item-count\" onClick={() => decQuantity(id,quantity)}>remove</i> {quantity} {''}\n            <i className=\"material-icons item-count\" onClick={() => incQuantity(id)}>add</i>= {price * quantity} ₽\n\n            <span className=\"secondary-content basket-delete \"\n                  onClick={() => removeFromBasket(id)}>\n                <i className=\"material-icons\">delete</i>\n            </span>\n        </li>\n    );\n};\n\nexport default BasketItem;","import React, {useContext} from 'react';\nimport BasketItem from \"./BasketItem\";\nimport {ShopContext} from \"../../context\";\n\nconst BasketList = () => {\n    const {\n        order,\n        handleBasketShow = Function.prototype\n    } = useContext(ShopContext);\n\n    const totalPrice = order.reduce((sum, el) => {\n        return sum + el.price * el.quantity\n    }, 0);\n\n    return (\n        <ul className=\"collection basket-list\">\n            <li className=\"collection-item blue darken-4 active\">Корзина</li>\n            {order.length\n                ? order.map(item => (\n                    <BasketItem\n                        key={item.id}\n                        {...item}\n                    />\n                ))\n                : <li className=\"collection-item blue darken-4 active\">Корзина пуста</li>\n            }\n            <li className=\"collection-item\">\n                Общая стоимость: {totalPrice}₽\n            </li>\n            <li className=\"collection-item\">\n                <button className=\"btn btn-small blue darken-4\">Оформить заказ</button>\n            </li>\n            <i className=\"material-icons basket-close\" onClick={handleBasketShow}>close</i>\n        </ul>\n    );\n};\n\nexport default BasketList;","import React, {useContext, useEffect} from 'react';\nimport {ShopContext} from \"../../context\";\n\nconst Alert = () => {\n    const {\n        alertName = '',\n        closeAlert = Function.prototype\n    } = useContext(ShopContext);\n\n    useEffect(() => {\n        const timerId = setTimeout(closeAlert, 3000);\n        return () => {\n            clearTimeout(timerId);\n        }\n    }, [alertName]);\n\n    return (\n        <div id=\"toast-container\">\n            <div className=\"toast\">{alertName} добавлен в корзину</div>\n        </div>\n    );\n};\n\nexport default Alert;","import React, {useEffect, useContext} from 'react';\nimport GoodsList from \"./catalog/GoodsList\";\nimport Preloader from \"./Preloader\";\nimport {API_KEY, API_URL} from \"../config\";\nimport Cart from \"./Cart\";\nimport BasketList from \"./basket/BasketList\";\nimport Alert from \"./basket/Alert\";\nimport {ShopContext} from \"../context\";\n\nconst Shop = () => {\n    const {\n        setGoods,\n        loading,\n        order,\n        isBasketShow,\n        alertName\n    } = useContext(ShopContext);\n\n    useEffect(function getGoods() {\n        fetch(API_URL, {\n            headers: {\n                'Authorization': API_KEY\n            }\n        }).then(response => response.json())\n            .then(data => {\n                setGoods(data.shop);\n            })\n    }, []);\n\n    return (\n        <main className=\"container content\">\n            <Cart\n                quantity={order.length}\n            />\n            {loading ? <Preloader/> : <GoodsList/>}\n            {isBasketShow && <BasketList/>}\n            {alertName && <Alert/>}\n        </main>\n    )\n}\n\nexport default Shop;","const API_KEY = process.env.REACT_APP_API_KEY;\nconst API_URL = 'https://fortniteapi.io/v2/shop?lang=ru';\n\nexport {\n    API_KEY,\n    API_URL\n}","import Header from \"./components/common/Header\";\nimport Footer from \"./components/common/Footer\";\nimport Shop from \"./components/Shop\";\nimport {ContextProvider} from \"./context\";\n\nfunction App() {\n    return (\n        <>\n            <Header/>\n            <ContextProvider>\n                <Shop/>\n            </ContextProvider>\n            <Footer/>\n        </>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}